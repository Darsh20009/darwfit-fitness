<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>حاسبة السعرات الحرارية</title>
<style>
    :root {
        --primary-color: #2196F3;
        --success-color: #4CAF50;
        --warning-color: #FFC107;
        --danger-color: #F44336;
        --carbs-color: #FF9800;
        --text-color: #ffffff;
        --background-color: #121212;
        --card-background: #1e1e1e;
    }
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
        background-color: var(--background-color);
        color: var(--text-color);
        line-height: 1.6;
        font-size: 16px;
    }
    .container {
        width: 100%;
        max-width: 100%;
        margin: 0 auto;
        padding: 15px;
    }
    header {
        text-align: center;
        margin-bottom: 1.5rem;
    }
    h1 {
        color: var(--primary-color);
        font-size: 1.8rem;
        margin-bottom: 1rem;
    }
    h2 {
        font-size: 1.4rem;
        margin-bottom: 1rem;
    }
    h3 {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
    }
    .main-content {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }
    .calculator-section {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        width: 100%;
    }
    .food-selection, .daily-summary, .calories-needs {
        background: var(--card-background);
        padding: 1.5rem;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    .input-field {
        width: 100%;
        padding: 12px;
        margin: 8px 0;
        border: 1px solid #333;
        border-radius: 6px;
        background-color: #333;
        color: var(--text-color);
        font-size: 1rem;
    }
    select.input-field {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 15px;
    }
    .quantity-section {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin: 1rem 0;
    }
    @media (min-width: 768px) {
        .quantity-section {
            flex-direction: row;
        }
    }
    .button {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s;
        margin: 8px 0;
    }
    .button.primary {
        background-color: var(--primary-color);
        color: white;
    }
    .button.secondary {
        background-color: #6c757d;
        color: white;
    }
    .button.danger {
        background-color: var(--danger-color);
        color: white;
    }
    .calories-result {
        margin: 1rem 0;
        text-align: center;
        font-size: 1.2rem;
    }
    .stats {
        margin: 1.5rem 0;
    }
    .stat-item {
        margin: 1rem 0;
    }
    .progress-container {
        width: 100%;
        height: 20px;
        background-color: #e0e0e0;
        border-radius: 10px;
        margin: 1rem 0;
        overflow: hidden;
    }
    .progress-bar {
        height: 100%;
        transition: width 0.3s ease;
        width: 0%;
    }
    .calories-bar {
        background-color: var(--primary-color);
    }
    .protein-bar {
        background-color: var(--success-color);
    }
    .carbs-bar {
        background-color: var(--carbs-color);
    }
    .status-message {
        margin: 1rem 0;
        padding: 10px;
        border-radius: 6px;
        text-align: center;
    }
    .status-message.success {
        background-color: #e8f5e9;
        color: var(--success-color);
    }
    .status-message.warning {
        background-color: #fff3e0;
        color: var(--warning-color);
    }
    .status-message.danger {
        background-color: #ffebee;
        color: var(--danger-color);
    }
    .hidden {
        display: none;
    }
    .custom-food-entry {
        display: none;
        margin-top: 1rem;
        padding: 1rem;
        border: 1px solid #333;
        border-radius: 6px;
        background-color: #333;
    }
    .custom-food-entry.active {
        display: block;
    }
    .search-container {
        position: relative;
        margin-bottom: 1rem;
    }
    .search-bar {
        width: 100%;
    }
    .search-results {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        max-height: 200px;
        overflow-y: auto;
        background: var(--card-background);
        border-radius: 0 0 6px 6px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        z-index: 10;
        display: none;
    }
    .search-results.visible {
        display: block;
    }
    .search-item {
        padding: 10px;
        cursor: pointer;
        border-bottom: 1px solid #333;
    }
    .search-item:hover {
        background-color: #333;
    }
    .login-section {
        margin-top: 2rem;
        background: var(--card-background);
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }
    .login-section h2 {
        color: var(--primary-color);
        margin-bottom: 1rem;
    }
    .forgot-password {
        margin-top: 10px;
        color: var(--primary-color);
        cursor: pointer;
        text-decoration: underline;
        text-align: center;
        display: block;
    }
    .logout-button {
        position: fixed;
        top: 15px;
        right: 15px;
        background-color: var(--danger-color);
        color: white;
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        z-index: 100;
    }
    .form-group {
        margin-bottom: 1rem;
    }
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
    }
    .tab-buttons {
        display: flex;
        margin-bottom: 1rem;
    }
    .tab-button {
        flex: 1;
        padding: 10px;
        text-align: center;
        background: #333;
        border: none;
        color: white;
        cursor: pointer;
    }
    .tab-button.active {
        background: var(--primary-color);
    }
    .food-history {
        max-height: 200px;
        overflow-y: auto;
        margin-top: 1rem;
    }
    .history-item {
        display: flex;
        justify-content: space-between;
        padding: 8px;
        border-bottom: 1px solid #333;
    }
    .remove-history {
        color: var(--danger-color);
        cursor: pointer;
    }
    .nutrient-info {
        display: flex;
        justify-content: space-between;
        margin-top: 5px;
        font-size: 0.9rem;
        color: #ccc;
    }
    .progress-group {
        margin-bottom: 1rem;
    }
    .progress-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
    }
    .food-category {
        font-size: 0.8rem;
        color: #aaa;
    }
</style>

<div class="container" id="loginContainer">
    <h1>تسجيل الدخول</h1>
    <form id="loginForm">
        <div class="form-group">
            <input type="text" id="loginCode" class="input-field" placeholder="الكود المكون من 4 أرقام" required="">
        </div>
        <button type="submit" class="button primary">تسجيل الدخول</button>
    </form>
    <div class="forgot-password" id="forgotPassword">نسيت كلمة المرور؟</div>
    <button id="showCreateAccount" class="button secondary">إنشاء حساب جديد</button>
</div>

<div class="container hidden" id="createAccountContainer">
    <h1>إنشاء حساب جديد</h1>
    <form id="createAccountForm">
        <div class="form-group">
            <input type="text" id="name" class="input-field" placeholder="الاسم" required="">
        </div>
        <div class="form-group">
            <input type="number" id="age" class="input-field" placeholder="العمر" required="">
        </div>
        <button type="submit" class="button primary">إنشاء حساب</button>
    </form>
    <button id="showLogin" class="button secondary">العودة لتسجيل الدخول</button>
</div>

<div class="container hidden" id="resetPasswordContainer">
    <h1>إعادة تعيين الكود</h1>
    <form id="resetPasswordForm">
        <div class="form-group">
            <input type="text" id="nameReset" class="input-field" placeholder="الاسم" required="">
        </div>
        <button type="submit" class="button primary">إرسال الكود الجديد</button>
    </form>
    <button id="showLoginFromReset" class="button secondary">العودة لتسجيل الدخول</button>
</div>

<div class="container hidden" id="mainContent">
    <button id="logoutButton" class="logout-button">تسجيل الخروج</button>
    <header>
        <h1>حاسبة السعرات الحرارية 🍽</h1>
    </header>
    
    <div class="tab-buttons">
        <button class="tab-button active" data-tab="calculator">الحاسبة</button>
        <button class="tab-button" data-tab="history">السجل</button>
        <button class="tab-button" data-tab="profile">الملف الشخصي</button>
    </div>
    
    <main class="main-content">
        <div class="tab-content active" id="calculatorTab">
            <div class="calculator-section">
                <div class="food-selection">
                    <h2>🍳 إضافة وجبة جديدة</h2>
                    <div class="search-container">
                        <div class="search-bar">
                            <input type="text" id="searchFood" placeholder="ابحث عن الطعام..." class="input-field">
                        </div>
                        <div id="searchResults" class="search-results"></div>
                    </div>
                    <select id="foodCategory" class="input-field">
                        <option value="">اختر نوع الطعام</option>
                        <option value="custom">✨ طعام مخصص</option>
                    </select>
                    <select id="foodItem" class="input-field">
                        <option value="">اختر الطعام</option>
                    </select>
                    <div id="customFoodEntry" class="custom-food-entry">
                        <input type="text" id="customFoodName" class="input-field" placeholder="اسم الطعام">
                        <input type="number" id="customCalories" class="input-field" placeholder="السعرات الحرارية لكل 100 جرام">
                        <input type="number" id="customProtein" class="input-field" placeholder="البروتين لكل 100 جرام">
                        <input type="number" id="customCarbs" class="input-field" placeholder="الكربوهيدرات لكل 100 جرام">
                    </div>
                    <div class="quantity-section">
                        <select id="quantityType" class="input-field">
                            <option value="tablespoon">ملعقة</option>
                            <option value="gram">جرام</option>
                            <option value="serving">حصة</option>
                            <option value="cup">كوب</option>
                            <option value="other">أخرى</option>
                        </select>
                        <input type="number" id="quantity" class="input-field" min="0" step="0.25" value="1">
                    </div>
                    <div class="calories-result">
                        <h3>السعرات الحرارية: <span id="caloriesAmount">0</span> سعرة</h3>
                        <h3>البروتين: <span id="proteinAmount">0</span> جرام</h3>
                        <h3>الكربوهيدرات: <span id="carbsAmount">0</span> جرام</h3>
                    </div>
                    <button id="addFood" class="button primary">➕ إضافة للحساب اليومي</button>
                </div>
                
                <div class="daily-summary">
                    <h2>📊 ملخص اليوم</h2>
                    <div class="goals-section">
                        <select id="goalType" class="input-field">
                            <option value="1500">خسارة وزن (نظام غذائي خفيف)</option>
                            <option value="1800">خسارة وزن (نظام غذائي متوسط)</option>
                            <option value="2000">الحفاظ على الوزن</option>
                            <option value="2500">زيادة وزن</option>
                            <option value="custom">تخصيص</option>
                        </select>
                        <input type="number" id="customGoal" class="input-field hidden" placeholder="أدخل هدفك اليومي">
                    </div>
                    <div class="stats">
                        <div class="stat-item">
                            <h3>🎯 الهدف اليومي:</h3>
                            <p id="dailyGoal">0 سعرة</p>
                        </div>
                        <div class="stat-item">
                            <h3>🍽 السعرات المستهلكة:</h3>
                            <p id="consumedCalories">0 سعرة</p>
                        </div>
                        <div class="stat-item">
                            <h3>⚖ السعرات المتبقية:</h3>
                            <p id="remainingCalories">0 سعرة</p>
                        </div>
                    </div>
                    <div class="progress-group">
                        <div class="progress-label">
                            <span>السعرات الحرارية</span>
                            <span id="caloriesProgressText">0%</span>
                        </div>
                        <div class="progress-container">
                            <div id="caloriesBar" class="progress-bar calories-bar"></div>
                        </div>
                    </div>
                    <div class="progress-group">
                        <div class="progress-label">
                            <span>البروتين</span>
                            <span id="proteinProgressText">0%</span>
                        </div>
                        <div class="progress-container">
                            <div id="proteinBar" class="progress-bar protein-bar"></div>
                        </div>
                    </div>
                    <div class="progress-group">
                        <div class="progress-label">
                            <span>الكربوهيدرات</span>
                            <span id="carbsProgressText">0%</span>
                        </div>
                        <div class="progress-container">
                            <div id="carbsBar" class="progress-bar carbs-bar"></div>
                        </div>
                    </div>
                    <div id="statusMessage" class="status-message"></div>
                    <button id="resetDay" class="button secondary">🔄 إعادة تعيين اليوم</button>
                </div>
            </div>
        </div>
        
        <div class="tab-content hidden" id="historyTab">
            <div class="food-selection">
                <h2>📅 سجل الأطعمة</h2>
                <div class="food-history" id="foodHistory">
                    
                </div>
                <button id="clearHistory" class="button danger" style="margin-top: 1rem;">مسح السجل</button>
            </div>
        </div>
        
        <div class="tab-content hidden" id="profileTab">
            <div class="calories-needs">
                <h2>👤 الملف الشخصي</h2>
                <div id="profileInfo" style="margin-bottom: 1.5rem;">
                    
                </div>
                
                <h2>احتياجاتك اليومية</h2>
                <form id="caloriesNeedsForm">
                    <select id="gender" class="input-field" required="">
                        <option value="">اختر الجنس</option>
                        <option value="male">ذكر</option>
                        <option value="female">أنثى</option>
                    </select>
                    <input type="number" id="ageNeeds" class="input-field" placeholder="العمر (سنوات)" required="">
                    <input type="number" id="weightNeeds" class="input-field" placeholder="الوزن (كجم)" required="">
                    <input type="number" id="heightNeeds" class="input-field" placeholder="الطول (سم)" required="">
                    <select id="activityLevel" class="input-field" required="">
                        <option value="">اختر مستوى النشاط</option>
                        <option value="1.2">قليل النشاط (لا تمارين)</option>
                        <option value="1.375">خفيف النشاط (تمارين خفيفة 1-3 أيام/أسبوع)</option>
                        <option value="1.55">متوسط النشاط (تمارين متوسطة 3-5 أيام/أسبوع)</option>
                        <option value="1.725">نشيط (تمارين شاقة 6-7 أيام/أسبوع)</option>
                        <option value="1.9">نشيط جدًا (تمارين شاقة يوميًا أو عمل بدني شاق)</option>
                    </select>
                    <button type="submit" class="button primary">حساب الاحتياجات</button>
                </form>
                <div id="caloriesNeedsResult" class="calories-result"></div>
            </div>
        </div>
    </main>
</div>

<script>
    // Food database with calories, protein and carbs
    const foodCategories = {
        "المطبخ المصري": {
            "كشري": {calories: 350, protein: 8, carbs: 60},
            "فول مدمس": {calories: 132, protein: 7, carbs: 19},
            "طعمية": {calories: 290, protein: 13, carbs: 25},
            "ملوخية": {calories: 95, protein: 6, carbs: 10},
            "بامية": {calories: 85, protein: 5, carbs: 9},
            "مسقعة": {calories: 140, protein: 9, carbs: 12},
            "محشي كرنب": {calories: 165, protein: 7, carbs: 15},
            "رز بالخلطة": {calories: 180, protein: 5, carbs: 35},
            "كبدة اسكندراني": {calories: 180, protein: 25, carbs: 5},
            "حمام محشي": {calories: 300, protein: 28, carbs: 20},
            "رقاق باللحمة": {calories: 385, protein: 22, carbs: 30},
            "سلطة بلدي": {calories: 50, protein: 2, carbs: 8},
            "بابا غنوج": {calories: 70, protein: 3, carbs: 6},
            "طحينة": {calories: 90, protein: 3, carbs: 5},
            "مخلل": {calories: 15, protein: 0, carbs: 3},
            "كوارع": {calories: 400, protein: 35, carbs: 10},
            "ممبار": {calories: 350, protein: 30, carbs: 8},
            "حواوشي": {calories: 280, protein: 18, carbs: 25},
            "فتة": {calories: 450, protein: 15, carbs: 40},
            "كبدة": {calories: 220, protein: 30, carbs: 5},
            "كريب شاورما فراخ": {calories: 480, protein: 28, carbs: 45},
            "كريب شاورما لحم": {calories: 520, protein: 30, carbs: 46},
            "كريب فراخ بالجبنة": {calories: 500, protein: 26, carbs: 48},
            "كريب سوسيس": {calories: 470, protein: 20, carbs: 50},
            "كريب بانيه": {calories: 530, protein: 25, carbs: 52},
            "كريب بسطرمة": {calories: 490, protein: 24, carbs: 46},
            "كريب سلامي": {calories: 480, protein: 22, carbs: 45},
            "كريب ميكس جبن": {calories: 450, protein: 18, carbs: 44},
            "كريب جبنة رومي": {calories: 430, protein: 16, carbs: 42},
            "كريب جبنة موتزاريلا": {calories: 440, protein: 17, carbs: 43},
            "كريب جبنة شيدر": {calories: 450, protein: 18, carbs: 44},
            "كريب جبنة + خضار": {calories: 420, protein: 14, carbs: 40},
            "كريب لحمة مفرومة": {calories: 500, protein: 28, carbs: 46},
            "كريب بطاطس": {calories: 430, protein: 12, carbs: 50},
            "كريب سجق بلدي": {calories: 510, protein: 25, carbs: 48},
            "كريب كبدة اسكندراني": {calories: 490, protein: 27, carbs: 45},
            "كريب جمبري": {calories: 520, protein: 30, carbs: 44},
            "كريب تونة": {calories: 450, protein: 22, carbs: 42},
            "كريب ميكس فراخ + سوسيس": {calories: 530, protein: 28, carbs: 49},
            "كريب كفتة": {calories: 500, protein: 26, carbs: 46},
            "كريب نوتيلا": {calories: 520, protein: 10, carbs: 58},
            "كريب نوتيلا + موز": {calories: 560, protein: 11, carbs: 62},
            "كريب نوتيلا + فراولة": {calories: 570, protein: 11, carbs: 64},
            "كريب نوتيلا + مكسرات": {calories: 600, protein: 12, carbs: 65},
            "كريب بالعسل": {calories: 500, protein: 9, carbs: 60},
            "كريب مربي": {calories: 490, protein: 8, carbs: 55},
            "كريب كراميل": {calories: 510, protein: 9, carbs: 58},
            "كريب زبدة + سكر": {calories: 460, protein: 7, carbs: 52},
            "كريب نوتيلا + مارشميلو": {calories: 590, protein: 10, carbs: 66},
            "أوريو": {calories: 530, protein: 9, carbs: 60},
            "كريب نوتيلا + آيس كريم": {calories: 610, protein: 12, carbs: 68},
            "كريب شوكولاتة بيضاء": {calories: 540, protein: 10, carbs: 62},
            "كريب نوتيلا + كراميل": {calories: 580, protein: 11, carbs: 65},
            "كريب دايت جبنة قريش": {calories: 300, protein: 20, carbs: 28},
            "كريب شوفان + زبادي": {calories: 320, protein: 18, carbs: 30},
            "كريب خضار مشوي": {calories: 340, protein: 10, carbs: 35},
            "كريب سبانخ": {calories: 330, protein: 12, carbs: 34},
            "كريب تونة لايت": {calories: 360, protein: 22, carbs: 32},
            "كريب بزيت الزيتون + جبنة فيتا": {calories: 370, protein: 14, carbs:30},
            "عدس أصفر بشوربة": {calories: 250, protein: 12, carbs: 35},
            "عدس بجبة": {calories: 230, protein: 10, carbs: 32},
            "كشك": {calories: 300, protein: 8, carbs: 40},
            "بيض بلدي مسلوق": {calories: 70, protein: 6, carbs: 1},
            "بيض بالبسطرمة": {calories: 220, protein: 12, carbs: 2},
            "جبنة قديمة": {calories: 110, protein: 6, carbs: 1},
            "جبنة قريش": {calories: 90, protein: 12, carbs: 1},
            "عيش بلدي من الطين": {calories: 160, protein: 4, carbs: 32},
            "طاجن بامية": {calories: 190, protein: 7, carbs: 20},
            "طاجن مسقعة": {calories: 200, protein: 6, carbs: 25},
            "كوسا مطبوخة": {calories: 140, protein: 5, carbs: 18},
            "ملوخية خضرا": {calories: 95, protein: 6, carbs: 10},
            "رز معمر": {calories: 400, protein: 10, carbs: 50},
            "بطاطس في الفرن": {calories: 250, protein: 4, carbs: 30},
            "شوربة لسان عصفور": {calories: 220, protein: 6, carbs: 25},
               // حادق
            "فطير باللحمة المفرومة": {calories: 580, protein: 18, carbs: 40},
            "فطير بالفراخ": {calories: 560, protein: 20, carbs: 42},
            "فطير بالسجق البلدي": {calories: 600, protein: 21, carbs: 41},
            "فطير بالبسطرمة": {calories: 590, protein: 20, carbs: 43},
            "فطير بالكبدة": {calories: 570, protein: 19, carbs: 40},
            "فطير بالتونة": {calories: 540, protein: 18, carbs: 38},
            "فطير بالجبنة الموتزاريلا": {calories: 500, protein: 12, carbs: 37},
            "فطير ميكس جبن": {calories: 530, protein: 15, carbs: 36},
            "فطير جبنة + خضار": {calories: 480, protein: 14, carbs: 35},
            "فطير سبانخ وجبن": {calories: 460, protein: 12, carbs: 34},
            "فطير بطاطس": {calories: 450, protein: 10, carbs: 42},
            "فطير بالبسطرمة والجبنة": {calories: 580, protein: 18, carbs: 39},
              // حلو
            "فطير بالعسل الأبيض": {calories: 500, protein: 7, carbs: 58},
            "فطير بالعسل الأسود": {calories: 510, protein: 8, carbs: 60},
            "فطير بالعسل والطحينة": {calories: 530, protein: 9, carbs: 62},
            "فطير بالسكر البودرة": {calories: 470, protein: 6, carbs: 54},
            "فطير بالمربى": {calories: 490, protein: 7, carbs: 56},
            "فطير بالكاسترد": {calories: 540, protein: 8, carbs: 58},
            "فطير بالشوكولاتة": {calories: 550, protein: 9, carbs: 60},
            "فطير نوتيلا": {calories: 570, protein: 10, carbs: 60},
            "فطير نوتيلا + موز": {calories: 600, protein: 11, carbs: 64},
            "فطير نوتيلا + مكسرات": {calories: 630, protein: 12, carbs: 65},
            "فطير نوتيلا + كراميل": {calories: 640, protein: 12, carbs: 66},
            "فطير زبدة + سكر": {calories: 520, protein: 9, carbs: 57},
                // ميكس / سبيشل
            "فطير ميكس لحوم وجبن": {calories: 640, protein: 25, carbs: 43},
            "فطير سوبر سبيشل (جبن + لحوم + خضار)": {calories: 660, protein: 26, carbs: 45},
            "فطير حادق + حلو (نصفين)": {calories: 700, protein: 28, carbs: 60},
            "فطير شوكولاتة + موز + مكسرات": {calories: 680, protein: 13, carbs: 68},
        },
        "المطبخ السعودي والخليجي": {
            "كبسة لحم": {calories: 320, protein: 25, carbs: 30},
            "مندي دجاج": {calories: 280, protein: 30, carbs: 25},
            "مطبق": {calories: 310, protein: 12, carbs: 35},
            "جريش": {calories: 220, protein: 8, carbs: 30},
            "مرقوق": {calories: 245, protein: 15, carbs: 25},
            "مضغوط": {calories: 290, protein: 22, carbs: 20},
            "معصوب": {calories: 270, protein: 6, carbs: 45},
            "شاكرية": {calories: 190, protein: 5, carbs: 35},
            "مجبوس": {calories: 315, protein: 20, carbs: 30},
            "صالونة": {calories: 225, protein: 18, carbs: 15},
            "تبولة": {calories: 100, protein: 3, carbs: 15},
            "حمص بالطحينة": {calories: 150, protein: 5, carbs: 12},
            "لبنة بالنعناع": {calories: 120, protein: 5, carbs: 8},
            "سليق": {calories: 300, protein: 10, carbs: 40},
            "مفطح": {calories: 500, protein: 40, carbs: 30},
            "قرصان": {calories: 350, protein: 25, carbs: 25},
            "مراصيع": {calories: 280, protein: 18, carbs: 20},
            "فتة تمر": {calories: 200, protein: 3, carbs: 45}
        },
        "المطبخ الشامي": {
           "فتوش": {calories: 120, protein: 3, carbs: 15},
           "تبولة": {calories: 100, protein: 3, carbs: 18},
           "كبة مقلية": {calories: 260, protein: 12, carbs: 20},
           "كبة بالصينية": {calories: 300, protein: 14, carbs: 25},
           "شيش طاووق": {calories: 220, protein: 30, carbs: 5}, 
           "كباب حلبي": {calories: 290, protein: 28, carbs: 6},
           "محشي كوسا": {calories: 190, protein: 7, carbs: 18},
           "مقلوبة": {calories: 280, protein: 10, carbs: 35},
           "يالنجي": {calories: 160, protein: 4, carbs: 22},
           "شاورما دجاج": {calories: 320, protein: 27, carbs: 15},
           "شاورما لحم": {calories: 350, protein: 30, carbs: 12},
           "ورق عنب": {calories: 140, protein: 3, carbs: 20},
           "بابا غنوج": {calories: 80, protein: 3, carbs: 10},
           "حمص باللحمة": {calories: 250, protein: 15, carbs: 18},
            "منسف": {calories: 420, protein: 30, carbs: 35}
        },
        "المطبخ التركي": {
           "إسكندر كباب": {calories: 450, protein: 35, carbs: 30},
           "دونر": {calories: 350, protein: 28, carbs: 25},
           "بوريك": {calories: 320, protein: 10, carbs: 35},
           "كفتة تركية": {calories: 280, protein: 24, carbs: 10},
           "مانتي": {calories: 300, protein: 12, carbs: 35},
           "شوربة عدس": {calories: 150, protein: 7, carbs: 20},
           "سلطة تركية": {calories: 90, protein: 2, carbs: 12},
           "كومبير (بطاطا محشية)": {calories: 400, protein: 10, carbs: 50},
           "سميت": {calories: 260, protein: 6, carbs: 30},
           "كنافة تركية": {calories: 370, protein: 6, carbs: 45},
           "بقلاوة تركية": {calories: 330, protein: 5, carbs: 40},
           "رز بلبن تركي (Sütlaç)": {calories: 220, protein: 6, carbs: 30},
           "عيش باللحم (Lahmacun)": {calories: 280, protein: 14, carbs: 32},
           "بيدا بالجبنة": {calories: 300, protein: 12, carbs: 35},
           "كوشاريك": {calories: 240, protein: 8, carbs: 28}
        },
        "المطبخ الهندي": {
           "برياني دجاج": {calories: 420, protein: 25, carbs: 45},
           "برياني لحم": {calories: 450, protein: 30, carbs: 42},
           "ماسالا دجاج": {calories: 380, protein: 28, carbs: 20},
           "تيكا ماسالا": {calories: 390, protein: 27, carbs: 18},
           "دال (عدس هندي)": {calories: 250, protein: 12, carbs: 30},
           "تشاباتي": {calories: 140, protein: 4, carbs: 20},
           "نان": {calories: 280, protein: 6, carbs: 38},
           "سمبوسة هندية": {calories: 300, protein: 5, carbs: 28},
           "ألو جوبى": {calories: 210, protein: 5, carbs: 25},
           "بالاك بانير": {calories: 330, protein: 12, carbs: 15},
           "كيما": {calories: 360, protein: 22, carbs: 10},
           "كوفتا هندية": {calories: 340, protein: 14, carbs: 20},
           "تشاي ماسالا": {calories: 120, protein: 3, carbs: 15},
           "كاري خضار": {calories: 270, protein: 8, carbs: 22},
           "بانير تيكا": {calories: 300, protein: 15, carbs: 10}
        },
        "المطبخ الصيني": {
           "نودلز بالخضار": {calories: 300, protein: 8, carbs: 40},
           "نودلز بالدجاج": {calories: 350, protein: 18, carbs: 35},
           "أرز مقلي بالخضار": {calories: 320, protein: 10, carbs: 45},
           "أرز مقلي بالدجاج": {calories: 360, protein: 20, carbs: 40},
           "دجاج سويت أند ساور": {calories: 390, protein: 22, carbs: 35},
           "دجاج كونغ باو": {calories: 370, protein: 25, carbs: 30},
           "سبرينغ رول": {calories: 200, protein: 4, carbs: 22},
           "حساء الذرة": {calories: 150, protein: 6, carbs: 18},
           "دامبلينغز": {calories: 280, protein: 10, carbs: 25},
           "توفو بالخضار": {calories: 250, protein: 12, carbs: 20},
           "مانجورين": {calories: 320, protein: 14, carbs: 28},
           "تشاو مين": {calories: 330, protein: 15, carbs: 36},
           "بطة بكين": {calories: 420, protein: 30, carbs: 15},
           "بيف بالخضار": {calories: 370, protein: 28, carbs: 18},
           "فطائر الباو": {calories: 290, protein: 9, carbs: 32}
        },
        "السناكس": {
           "شيبس بطاطس": {calories: 150, protein: 2, carbs: 15},
           "بوشار (فشار)": {calories: 90, protein: 3, carbs: 12},
           "مكسرات مشكلة": {calories: 200, protein: 6, carbs: 8},
           "كوكيز بالشوكولاتة": {calories: 180, protein: 2, carbs: 22},
           "كراكرز مالح": {calories: 120, protein: 3, carbs: 15},
           "باتشيتو": {calories: 140, protein: 2, carbs: 18},
           "سناك جبنة": {calories: 160, protein: 4, carbs: 14},
           "بسكويت شاي": {calories: 100, protein: 1, carbs: 14},
           "مولتو": {calories: 220, protein: 4, carbs: 28},
           "أوريو": {calories: 160, protein: 2, carbs: 20},
           "بسكويت بالتمر": {calories: 130, protein: 2, carbs: 18},
           "برينجلز": {calories: 160, protein: 1, carbs: 17},
           "دوريتوس": {calories: 150, protein: 2, carbs: 16},
           "بسكويت بالزبدة": {calories: 170, protein: 2, carbs: 20},
           "ميني بيتزا سناك": {calories: 210, protein: 5, carbs: 25}
        },
        "المشروبات الطبيعية": {
           "عصير برتقال طازج": {calories: 110, protein: 2, carbs: 25},
           "عصير تفاح طبيعي": {calories: 120, protein: 1, carbs: 28},
           "عصير جوافة": {calories: 140, protein: 2, carbs: 30},
           "عصير مانجو": {calories: 160, protein: 1, carbs: 35},
           "عصير رمان": {calories: 130, protein: 1, carbs: 28},
           "عصير شمام": {calories: 100, protein: 1, carbs: 20},
           "عصير فراولة": {calories: 120, protein: 2, carbs: 25},
           "عصير ليمون": {calories: 90, protein: 1, carbs: 18},
           "كوكتيل فواكه": {calories: 180, protein: 2, carbs: 35},
           "عصير قصب": {calories: 170, protein: 2, carbs: 40},
           "سوبيا طبيعية": {calories: 150, protein: 1, carbs: 35},
           "تمر هندي": {calories: 140, protein: 1, carbs: 30},
           "عرقسوس": {calories: 130, protein: 1, carbs: 28},
           "لبن رايب": {calories: 80, protein: 3, carbs: 10},
           "لبن بالعسل": {calories: 150, protein: 4, carbs: 18}
        },
        "المشروبات الصناعية": {
           "بيبسي": {calories: 150, protein: 0, carbs: 39},
           "كوكاكولا": {calories: 140, protein: 0, carbs: 38},
           "سفن أب": {calories: 140, protein: 0, carbs: 36},
           "ميرندا برتقال": {calories: 160, protein: 0, carbs: 42},
           "فانتا": {calories: 150, protein: 0, carbs: 40},
           "ريد بول": {calories: 110, protein: 1, carbs: 28},
           "مشروب طاقة مونستر": {calories: 120, protein: 0, carbs: 29},
           "عصير معلب مانجو": {calories: 160, protein: 0, carbs: 38},
           "عصير تفاح معلب": {calories: 150, protein: 0, carbs: 36},
           "لبن بنكهات صناعية": {calories: 170, protein: 3, carbs: 28},
           "نسكويك": {calories: 190, protein: 4, carbs: 32},
           "مشروب شوكولاتة بارد": {calories: 210, protein: 5, carbs: 35},
           "شاي مثلج": {calories: 120, protein: 0, carbs: 28},
           "عصير تانج": {calories: 140, protein: 0, carbs: 35},
           "مياه غازية بنكهات": {calories: 100, protein: 0, carbs: 25}
        },
        "المطبخ الياباني": {
           "سوشي": {calories: 300, protein: 15, carbs: 35},
           "رامن": {calories: 450, protein: 18, carbs: 50},
           "ياكيسوبا": {calories: 400, protein: 14, carbs: 45},
           "ترياكي دجاج": {calories: 370, protein: 25, carbs: 25},
           "تمبورا": {calories: 320, protein: 10, carbs: 28},
           "ميسو شوربة": {calories: 80, protein: 3, carbs: 8},
           "اونيغيري": {calories: 180, protein: 4, carbs: 36},
           "تاكوياكي": {calories: 290, protein: 10, carbs: 30},
           "شاشيمي": {calories: 200, protein: 25, carbs: 2},
           "اودون": {calories: 380, protein: 12, carbs: 42},
           "غيوزا": {calories: 240, protein: 10, carbs: 20},
           "شوكو بان": {calories: 220, protein: 5, carbs: 28},
           "موشي": {calories: 170, protein: 3, carbs: 25},
           "كاري ياباني": {calories: 400, protein: 18, carbs: 35},
           "تيبانياكي": {calories: 390, protein: 26, carbs: 15}
        },
        "المطبخ المكسيكي": {
           "تاكو": {calories: 300, protein: 18, carbs: 20},
           "بوريتو": {calories: 500, protein: 30, carbs: 45},
           "كاساديا": {calories: 420, protein: 22, carbs: 35},
           "فاهيتا": {calories: 390, protein: 25, carbs: 30},
           "إنشيلادا": {calories: 400, protein: 20, carbs: 40},
           "تشيميتشانغا": {calories: 450, protein: 22, carbs: 38},
           "غواكامولي": {calories: 150, protein: 2, carbs: 10},
           "ناتشوز بالجبن": {calories: 350, protein: 8, carbs: 35},
           "أرز مكسيكي": {calories: 280, protein: 6, carbs: 45},
           "فاصوليا مكسيكية": {calories: 220, protein: 10, carbs: 25},
           "صوص سالسا": {calories: 50, protein: 1, carbs: 10},
           "سلطة تاكو": {calories: 300, protein: 14, carbs: 20},
           "تشورو": {calories: 270, protein: 3, carbs: 40},
           "تورتيا": {calories: 200, protein: 4, carbs: 30},
           "بيكو دي غايو": {calories: 60, protein: 1, carbs: 8}
        },
        "المطبخ الأمريكي": {
           "ستيك لحم": {calories: 500, protein: 40, carbs: 5},
           "ماك آند تشيز": {calories: 450, protein: 15, carbs: 50},
           "تشكن وينجز": {calories: 390, protein: 25, carbs: 12},
           "كلوب ساندويتش": {calories: 420, protein: 22, carbs: 35},
           "تشيز برجر": {calories: 540, protein: 28, carbs: 38},
           "هوت كيك": {calories: 320, protein: 6, carbs: 40},
           "فرايز بالجبن": {calories: 410, protein: 10, carbs: 42},
           "براونيز": {calories: 360, protein: 5, carbs: 45},
           "كورندوغ": {calories: 310, protein: 12, carbs: 28},
           "سلطة كول سلو": {calories: 180, protein: 2, carbs: 14},
           "دونات أمريكي": {calories: 350, protein: 4, carbs: 50},
           "كورن فليكس بالحليب": {calories: 200, protein: 5, carbs: 30},
           "بطاطا بوريه": {calories: 250, protein: 4, carbs: 35},
           "تشيكن برجر": {calories: 460, protein: 22, carbs: 38},
           "أبل باي": {calories: 370, protein: 3, carbs: 45}
        },
        "أنواع البيتزا": {
          "بيتزا مارجريتا (عجينة إيطالي - بدون أطراف جبن)": {
           calories: 420, protein: 15, carbs: 48
           },
          "بيتزا خضار (عجينة عادية - بدون أطراف جبن)": {
          calories: 450, protein: 14, carbs: 50
         },
           "بيتزا بيبروني (عجينة بان - بأطراف جبن)": {
          calories: 520, protein: 20, carbs: 55
         },
          "بيتزا دجاج باربيكيو (عجينة إيطالي - بأطراف جبن)": {
           calories: 530, protein: 22, carbs: 52
         },
          "بيتزا سي فود (عجينة رقيقة - بدون أطراف جبن)": {
          calories: 480, protein: 24, carbs: 45
         },
          "بيتزا سوبر سوبريم (عجينة بان - بأطراف جبن)": {
          calories: 550, protein: 25, carbs: 58
         },
          "بيتزا جبنة مشكل (عجينة إيطالي - بأطراف جبن)": {
          calories: 500, protein: 21, carbs: 50
         },
          "بيتزا سلامي (عجينة عادية - بدون أطراف جبن)": {
          calories: 470, protein: 19, carbs: 48
         },
          "بيتزا تونة (عجينة رقيقة - بدون أطراف جبن)": {
          calories: 460, protein: 20, carbs: 46
         },
          "بيتزا فاهيتا دجاج (عجينة بان - بأطراف جبن)": {
          calories: 540, protein: 23, carbs: 54
         },
          "بيتزا مشروم (عجينة إيطالي - بدون أطراف جبن)": {
          calories: 430, protein: 16, carbs: 47
         },
          "بيتزا لحم مفروم (عجينة عادية - بأطراف جبن)": {
           calories: 510, protein: 22, carbs: 50
         },
          "بيتزا رانش دجاج (عجينة بان - بأطراف جبن)": {
           calories: 560, protein: 24, carbs: 56
         },
          "بيتزا هاواي (عجينة رقيقة - بدون أطراف جبن)": {
           calories: 490, protein: 18, carbs: 50
         },
          "بيتزا ببروني (عجينة إيطالي - بأطراف جبن)": {
          calories: 530, protein: 22, carbs: 52
         },
        },
        "أنواع البرجر": {
           "برجر لحم كلاسيك (عيش عادي - بدون جبن)": {
            calories: 500, protein: 28, carbs: 35
            },
           "تشيز برجر (عيش عادي - شريحة جبن واحدة)": {
           calories: 540, protein: 30, carbs: 36
           },
           "برجر دبل لحم (عيش بريوش - جبن مزدوج)": {
           calories: 680, protein: 40, carbs: 38
           },
           "برجر دجاج مقلي (عيش عادي - صوص رانش)": {
           calories: 520, protein: 26, carbs: 40
           },
           "برجر دجاج مشوي (عيش توست - بدون صوصات)": {
           calories: 430, protein: 28, carbs: 28
           },
           "سبايسي برجر دجاج (عيش عادي - صوص حار)": {
           calories: 550, protein: 27, carbs: 40
           },
           "برجر مشروم سوس (عيش بريوش - مشروم و جبن)": {
           calories: 600, protein: 32, carbs: 38
           },
           "برجر نباتي (عيش حبوب كاملة - بدون جبن)": {
            calories: 480, protein: 20, carbs: 42
           },
           "برجر بيض وجبن (عيش توست - بيض + شيدر)": {
        calories: 470, protein: 22, carbs: 30
           },
           "برجر ببروني (عيش بريوش - لحم + ببروني)": {
           calories: 620, protein: 35, carbs: 36
           },
           "برجر بجبن موزاريلا (عيش عادي - جبن سايح)": {
            calories: 560, protein: 30, carbs: 35
           },
            "برجر كرسبي (عيش عادي - دجاج مقلي)": {
            calories: 540, protein: 25, carbs: 38
            },
           "برجر تركي (عيش توست - صوص زبادي)": {
            calories: 500, protein: 27, carbs: 33
           },
           "برجر ستيك (عيش بريوش - لحم شرائح)": {
            calories: 620, protein: 38, carbs: 35
           },
           "ميني برجر (صغير الحجم - جبن فقط)": {
           calories: 320, protein: 14, carbs: 28
           },
        },
        "الصوصات": {
           "كاتشب": {calories: 20, protein: 0, carbs: 5},
           "مايونيز": {calories: 90, protein: 0, carbs: 1},
           "مايونيز لايت": {calories: 40, protein: 0, carbs: 1},
           "مستردة": {calories: 10, protein: 0, carbs: 1},
           "صوص باربيكيو": {calories: 40, protein: 0, carbs: 9},
           "صوص رانش": {calories: 70, protein: 1, carbs: 2},
           "صوص ثومية": {calories: 100, protein: 1, carbs: 3},
           "صوص شيدر": {calories: 110, protein: 2, carbs: 3},
           "صوص سويت آند ساور": {calories: 45, protein: 0, carbs: 11},
            "سبايسي مايونيز": {calories: 95, protein: 0, carbs: 2},
           "صوص الفلفل الأسود": {calories: 60, protein: 1, carbs: 4},
           "صوص مشروم": {calories: 90, protein: 2, carbs: 5},
           "صوص بيج تايستي": {calories: 100, protein: 1, carbs: 2},
           "صوص بيج ماك": {calories: 90, protein: 1, carbs: 3},
           "صوص كنتاكي": {calories: 85, protein: 1, carbs: 2},
           "صوص بافلو": {calories: 45, protein: 0, carbs: 1},
           "صوص شطة": {calories: 5, protein: 0, carbs: 1},
           "صوص ترياكي": {calories: 35, protein: 1, carbs: 7},
           "صوص تشيلي": {calories: 40, protein: 0, carbs: 3},
           "صوص البيستو": {calories: 90, protein: 1, carbs: 2},
           "صوص الجبنة الزرقاء": {calories: 120, protein: 2, carbs: 2},
           "صوص كارميل": {calories: 60, protein: 0, carbs: 12},
           "صوص شوكولاتة": {calories: 70, protein: 1, carbs: 10},
           "صوص هوني مسترد": {calories: 60, protein: 0, carbs: 6},
           "صوص فرنسي": {calories: 80, protein: 1, carbs: 4},
           "صوص إيطالي": {calories: 60, protein: 1, carbs: 3},
           "زيت وليمون": {calories: 90, protein: 0, carbs: 1},
           "صوص الزبادي بالنعناع": {calories: 50, protein: 2, carbs: 3},
           "صوص صويا": {calories: 10, protein: 1, carbs: 1},
           "صوص سويت تشيلي": {calories: 60, protein: 0, carbs: 13}
        },
        "الحلويات الغربية": {
           "تشيز كيك": {calories: 350, protein: 6, carbs: 40},
           "براونيز": {calories: 360, protein: 5, carbs: 45},
           "تارت الفواكه": {calories: 330, protein: 4, carbs: 42},
           "موس الشوكولاتة": {calories: 280, protein: 4, carbs: 40},
           "كريب نوتيلا": {calories: 370, protein: 6, carbs: 45},
           "كوكيز أمريكي": {calories: 180, protein: 2, carbs: 24},
           "وافل": {calories: 320, protein: 6, carbs: 45},
           "بان كيك": {calories: 340, protein: 7, carbs: 50},
           "آيس كريم فانيلا": {calories: 210, protein: 3, carbs: 30},
           "كاسترد": {calories: 200, protein: 5, carbs: 35},
           "تيراميسو": {calories: 360, protein: 6, carbs: 38},
           "فروتي بارفيه": {calories: 300, protein: 5, carbs: 40},
           "دونات بالشوكولاتة": {calories: 370, protein: 5, carbs: 48},
           "كعك الزبدة": {calories: 400, protein: 6, carbs: 50},
           "ماربل كيك": {calories: 320, protein: 5, carbs: 38}
        },
        "الحلويات المصرية": {
           "أم علي": {calories: 250, protein: 5, carbs: 35},
           "بسبوسة": {calories: 300, protein: 5, carbs: 45},
           "كنافة": {calories: 350, protein: 6, carbs: 50},
           "بلح الشام": {calories: 280, protein: 4, carbs: 45},
           "قطايف": {calories: 280, protein: 4, carbs: 40},
           "غريبة": {calories: 350, protein: 4, carbs: 50},
           "كحك بالعجوة": {calories: 320, protein: 4, carbs: 40},
           "كحك بالسمن": {calories: 370, protein: 4, carbs: 42},
           "بيتي فور": {calories: 330, protein: 3, carbs: 38},
           "سابليه": {calories: 340, protein: 4, carbs: 36},
           "فطير مشلتت بالعسل": {calories: 420, protein: 6, carbs: 50},
           "زلابية (لقيمات مصرية)": {calories: 300, protein: 3, carbs: 40},
           "أرز باللبن": {calories: 200, protein: 5, carbs: 35},
           "مهلبية": {calories: 180, protein: 4, carbs: 30},
           "سحلب": {calories: 220, protein: 4, carbs: 35}
        },
        "الحلويات اليومية": {
           "كريم كراميل": {calories: 190, protein: 4, carbs: 28},
           "جيلي": {calories: 90, protein: 1, carbs: 20},
           "بودينج شوكولاتة": {calories: 210, protein: 3, carbs: 30},
           "كيكة إسفنجية": {calories: 250, protein: 4, carbs: 35},
           "تشيز كيك": {calories: 350, protein: 6, carbs: 40},
           "بسكويت شاي": {calories: 100, protein: 1, carbs: 14},
           "مولتو": {calories: 220, protein: 4, carbs: 28},
           "وافل محشي شوكولاتة": {calories: 340, protein: 5, carbs: 44},
           "بان كيك بالعسل": {calories: 320, protein: 5, carbs: 38},
           "كريب نوتيلا": {calories: 370, protein: 6, carbs: 45},
           "دونات محشي": {calories: 360, protein: 4, carbs: 46},
           "كوكيز شوكولاتة": {calories: 180, protein: 2, carbs: 24},
           "ماربل كيك": {calories: 320, protein: 5, carbs: 38},
           "كاسترد": {calories: 200, protein: 5, carbs: 35},
           "فروتي بارفيه": {calories: 300, protein: 5, carbs: 40}
        },
        "المخبوزات": {
           "عيش بلدي": {calories: 150, protein: 4, carbs: 30},
           "عيش أبيض": {calories: 140, protein: 4, carbs: 28},
           "عيش توست": {calories: 80, protein: 2, carbs: 15},
           "خبز الشوفان": {calories: 120, protein: 5, carbs: 20},
           "خبز القمح الكامل": {calories: 130, protein: 4, carbs: 24},
           "باتيه بالجبنة": {calories: 240, protein: 6, carbs: 28},
           "كرواسون": {calories: 270, protein: 5, carbs: 30},
           "بيتزا ميني": {calories: 300, protein: 8, carbs: 32},
           "عيش الفينو": {calories: 160, protein: 4, carbs: 30},
           "خبز الباجيت": {calories: 220, protein: 6, carbs: 36},
           "عيش السن": {calories: 110, protein: 6, carbs: 16},
           "خبز التورتيلا": {calories: 150, protein: 4, carbs: 25},
           "خبز الزعتر": {calories: 180, protein: 5, carbs: 22},
           "فطير محشي": {calories: 300, protein: 7, carbs: 35},
           "فطير بالسكر": {calories: 320, protein: 6, carbs: 38}
        },
        "الفواكه": {
           "موز": {calories: 90, protein: 1, carbs: 22},
           "تفاح": {calories: 80, protein: 0, carbs: 20},
           "برتقال": {calories: 60, protein: 1, carbs: 15},
           "عنب": {calories: 70, protein: 0, carbs: 18},
           "جوافة": {calories: 80, protein: 2, carbs: 17},
           "مانجو": {calories: 100, protein: 1, carbs: 25},
           "رمان": {calories: 90, protein: 1, carbs: 20},
           "كمثرى": {calories: 85, protein: 1, carbs: 21},
           "بطيخ": {calories: 30, protein: 1, carbs: 8},
           "شمام": {calories: 35, protein: 1, carbs: 9},
           "فراولة": {calories: 40, protein: 1, carbs: 10},
           "توت": {calories: 50, protein: 1, carbs: 12},
           "أناناس": {calories: 60, protein: 0, carbs: 15},
           "خوخ": {calories: 70, protein: 1, carbs: 18},
           "مشمش": {calories: 50, protein: 1, carbs: 12}
        },
        "السلطات": {
           "سلطة خضراء": {calories: 50, protein: 2, carbs: 8},
           "سلطة زبادي": {calories: 70, protein: 3, carbs: 5},
           "سلطة طحينة": {calories: 90, protein: 3, carbs: 5},
           "سلطة بابا غنوج": {calories: 80, protein: 3, carbs: 6},
           "سلطة يونانية": {calories: 120, protein: 4, carbs: 10},
           "سلطة فتوش": {calories: 100, protein: 2, carbs: 15},
           "سلطة تبولة": {calories: 90, protein: 3, carbs: 14},
           "سلطة سيزر": {calories: 180, protein: 7, carbs: 10},
           "سلطة ملفوف": {calories: 60, protein: 2, carbs: 9},
           "سلطة جرجير": {calories: 40, protein: 2, carbs: 6},
           "سلطة تونة": {calories: 150, protein: 10, carbs: 5},
           "سلطة دجاج مشوي": {calories: 220, protein: 20, carbs: 7},
           "سلطة الشمندر": {calories: 70, protein: 2, carbs: 14},
           "سلطة الحمص": {calories: 160, protein: 6, carbs: 12},
           "سلطة البقوليات": {calories: 180, protein: 8, carbs: 20}
        },
        "أكلات دايت وكيتو": {
           "صدور دجاج مشوي": {calories: 165, protein: 31, carbs: 0},
           "تونة بدون زيت": {calories: 90, protein: 20, carbs: 0},
           "بيض مسلوق": {calories: 70, protein: 6, carbs: 1},
           "سلطة تونة دايت": {calories: 120, protein: 12, carbs: 3},
           "أومليت بيض بالخضار": {calories: 180, protein: 10, carbs: 4},
           "زهره مشوية (قرنبيط)": {calories: 70, protein: 4, carbs: 8},
           "شوربة خضار دايت": {calories: 90, protein: 3, carbs: 12},
           "بروكلي مطهي": {calories: 55, protein: 4, carbs: 6},
           "ستيك لحم خالي من الدهون": {calories: 250, protein: 30, carbs: 0},
           "كوسا محشية دايت": {calories: 160, protein: 10, carbs: 10},
           "كيتو خبز باللوز": {calories: 110, protein: 5, carbs: 2},
           "كيتو بيتزا بالجبنة": {calories: 220, protein: 12, carbs: 4},
           "زبدة الفول السوداني (بدون سكر)": {calories: 190, protein: 8, carbs: 5},
           "بيض مع أفوكادو": {calories: 240, protein: 9, carbs: 3},
           "تشكن رول كيتو": {calories: 300, protein: 25, carbs: 2}
        },
        "الحلويات": {
            "كنافة": {calories: 350, protein: 6, carbs: 50},
            "بقلاوة": {calories: 320, protein: 5, carbs: 45},
            "قطايف": {calories: 280, protein: 4, carbs: 40},
            "أم علي": {calories: 250, protein: 5, carbs: 35},
            "مهلبية": {calories: 180, protein: 4, carbs: 30},
            "أرز باللبن": {calories: 200, protein: 5, carbs: 35},
            "بسبوسة": {calories: 300, protein: 5, carbs: 45},
            "لقيمات": {calories: 250, protein: 3, carbs: 40},
            "بلح الشام": {calories: 280, protein: 4, carbs: 45},
            "غريبة": {calories: 350, protein: 4, carbs: 50},
            "تشيز كيك": {calories: 320, protein: 6, carbs: 40},
            "كيك الشوكولاتة": {calories: 340, protein: 5, carbs: 45},
            "دونات": {calories: 350, protein: 4, carbs: 50},
            "وافل": {calories: 320, protein: 6, carbs: 45},
            "بان كيك": {calories: 340, protein: 7, carbs: 50},
            "آيس كريم": {calories: 210, protein: 3, carbs: 30},
            "مهلبية": {calories: 180, protein: 4, carbs: 30},
            "كاسترد": {calories: 200, protein: 5, carbs: 35},
            "موس الشوكولاتة": {calories: 280, protein: 4, carbs: 40},
            "سحلب": {calories: 220, protein: 4, carbs: 35}
        },
    };

    // Quantity types
    const quantityTypes = {
        "tablespoon": 15,    // 15 جرام لكل ملعقة
        "gram": 1,           // 1 جرام لكل جرام
        "serving": 100,      // 100 جرام لكل حصة
        "cup": 240,          // 240 جرام لكل كوب
        "other": 1           // أخرى (يتم إدخال الكمية يدويًا بالجرام)
    };

    // State management
    let state = {
        dailyGoal: 0,
        consumedCalories: 0,
        remainingCalories: 0,
        proteinGoal: 0,
        consumedProtein: 0,
        carbsGoal: 0,
        consumedCarbs: 0,
        customFoods: {},
        foodHistory: [],
        userNeeds: null
    };

    // DOM Elements
    const elements = {
        foodCategory: document.getElementById('foodCategory'),
        foodItem: document.getElementById('foodItem'),
        quantityType: document.getElementById('quantityType'),
        quantity: document.getElementById('quantity'),
        caloriesAmount: document.getElementById('caloriesAmount'),
        proteinAmount: document.getElementById('proteinAmount'),
        carbsAmount: document.getElementById('carbsAmount'),
        addFood: document.getElementById('addFood'),
        goalType: document.getElementById('goalType'),
        customGoal: document.getElementById('customGoal'),
        dailyGoal: document.getElementById('dailyGoal'),
        consumedCalories: document.getElementById('consumedCalories'),
        remainingCalories: document.getElementById('remainingCalories'),
        caloriesBar: document.getElementById('caloriesBar'),
        proteinBar: document.getElementById('proteinBar'),
        carbsBar: document.getElementById('carbsBar'),
        caloriesProgressText: document.getElementById('caloriesProgressText'),
        proteinProgressText: document.getElementById('proteinProgressText'),
        carbsProgressText: document.getElementById('carbsProgressText'),
        statusMessage: document.getElementById('statusMessage'),
        resetDay: document.getElementById('resetDay'),
        customFoodEntry: document.getElementById('customFoodEntry'),
        customFoodName: document.getElementById('customFoodName'),
        customCalories: document.getElementById('customCalories'),
        customProtein: document.getElementById('customProtein'),
        customCarbs: document.getElementById('customCarbs'),
        searchFood: document.getElementById('searchFood'),
        searchResults: document.getElementById('searchResults'),
        loginForm: document.getElementById('loginForm'),
        createAccountForm: document.getElementById('createAccountForm'),
        resetPasswordForm: document.getElementById('resetPasswordForm'),
        showCreateAccount: document.getElementById('showCreateAccount'),
        showLogin: document.getElementById('showLogin'),
        showLoginFromReset: document.getElementById('showLoginFromReset'),
        forgotPassword: document.getElementById('forgotPassword'),
        caloriesNeedsForm: document.getElementById('caloriesNeedsForm'),
        gender: document.getElementById('gender'),
        ageNeeds: document.getElementById('ageNeeds'),
        weightNeeds: document.getElementById('weightNeeds'),
        heightNeeds: document.getElementById('heightNeeds'),
        activityLevel: document.getElementById('activityLevel'),
        caloriesNeedsResult: document.getElementById('caloriesNeedsResult'),
        logoutButton: document.getElementById('logoutButton'),
        foodHistory: document.getElementById('foodHistory'),
        clearHistory: document.getElementById('clearHistory'),
        profileInfo: document.getElementById('profileInfo'),
        tabButtons: document.querySelectorAll('.tab-button'),
        tabContents: document.querySelectorAll('.tab-content')
    };

    // Initialize food categories
    function initializeFoodCategories() {
        for (const category in foodCategories) {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            elements.foodCategory.appendChild(option);
        }
    }

    // Update food items based on selected category
    function updateFoodItems(category) {
        elements.foodItem.innerHTML = '<option value="">اختر الطعام</option>';
        if (category === 'custom') {
            elements.customFoodEntry.classList.add('active');
            elements.foodItem.classList.add('hidden');
        } else {
            elements.customFoodEntry.classList.remove('active');
            elements.foodItem.classList.remove('hidden');
            if (category && foodCategories[category]) {
                const foods = foodCategories[category];
                for (const food in foods) {
                    const option = document.createElement('option');
                    option.value = food;
                    option.textContent = food;
                    elements.foodItem.appendChild(option);
                }
            }
        }
    }

    // Search food items with better performance
    function searchFoodItems(query) {
        const results = [];
        if (!query || query.length < 2) return results;
        
        const queryLower = query.toLowerCase();
        for (const category in foodCategories) {
            for (const food in foodCategories[category]) {
                if (food.toLowerCase().includes(queryLower)) {
                    results.push({ 
                        category, 
                        food,
                        calories: foodCategories[category][food].calories,
                        protein: foodCategories[category][food].protein,
                        carbs: foodCategories[category][food].carbs
                    });
                }
            }
        }
        return results;
    }

    // Handle search input with debounce
    let searchTimeout;
    elements.searchFood.addEventListener('input', () => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const query = elements.searchFood.value.trim();
            const results = searchFoodItems(query);
            displaySearchResults(results);
        }, 300);
    });

    // Display search results
    function displaySearchResults(results) {
        elements.searchResults.innerHTML = '';
        
        if (results.length === 0) {
            elements.searchResults.classList.remove('visible');
            return;
        }
        
        results.slice(0, 10).forEach(result => {
            const item = document.createElement('div');
            item.className = 'search-item';
            item.innerHTML = `
                <div>${result.food}</div>
                <div class="nutrient-info">
                    <span>${result.calories} سعرة</span>
                    <span>${result.protein} جرام بروتين</span>
                    <span>${result.carbs} جرام كارب</span>
                </div>
                <div class="food-category">${result.category}</div>
            `;
            item.addEventListener('click', () => {
                selectFoodFromSearch(result.category, result.food);
            });
            elements.searchResults.appendChild(item);
        });
        
        elements.searchResults.classList.add('visible');
    }

    // Select food from search results
    function selectFoodFromSearch(category, food) {
        elements.foodCategory.value = category;
        updateFoodItems(category);
        elements.foodItem.value = food;
        elements.searchFood.value = '';
        elements.searchResults.classList.remove('visible');
        calculateNutrients();
    }

    // Hide search results when clicking outside
    document.addEventListener('click', (e) => {
        if (!elements.searchFood.contains(e.target) && !elements.searchResults.contains(e.target)) {
            elements.searchResults.classList.remove('visible');
        }
    });

    // Calculate grams based on quantity type
    function getGramsFromQuantity(quantity, quantityType) {
        return quantity * (quantityTypes[quantityType] || 1);
    }

    // Calculate calories, protein and carbs
    function calculateNutrients() {
        const category = elements.foodCategory.value;
        const quantity = parseFloat(elements.quantity.value) || 0;
        const quantityType = elements.quantityType.value;
        let calories = 0;
        let protein = 0;
        let carbs = 0;
        
        if (category === 'custom') {
            const customCalories = parseFloat(elements.customCalories.value) || 0;
            const customProtein = parseFloat(elements.customProtein.value) || 0;
            const customCarbs = parseFloat(elements.customCarbs.value) || 0;
            const grams = getGramsFromQuantity(quantity, quantityType);
            calories = (customCalories * grams) / 100;
            protein = (customProtein * grams) / 100;
            carbs = (customCarbs * grams) / 100;
        } else {
            const food = elements.foodItem.value;
            if (category && food) {
                const foodData = foodCategories[category][food];
                const grams = getGramsFromQuantity(quantity, quantityType);
                calories = (foodData.calories * grams) / 100;
                protein = (foodData.protein * grams) / 100;
                carbs = (foodData.carbs * grams) / 100;
            }
        }
        
        elements.caloriesAmount.textContent = Math.round(calories);
        elements.proteinAmount.textContent = Math.round(protein);
        elements.carbsAmount.textContent = Math.round(carbs);
        return { calories, protein, carbs };
    }

    // Update progress
    function updateProgress() {
        elements.dailyGoal.textContent = `${state.dailyGoal} سعرة`;
        elements.consumedCalories.textContent = `${state.consumedCalories} سعرة`;
        elements.remainingCalories.textContent = `${state.remainingCalories} سعرة`;
        
        // Update calories progress
        const caloriesProgress = (state.dailyGoal > 0) ? (state.consumedCalories / state.dailyGoal) * 100 : 0;
        elements.caloriesBar.style.width = `${Math.min(caloriesProgress, 100)}%`;
        elements.caloriesProgressText.textContent = `${Math.round(caloriesProgress)}%`;
        
        // Update protein progress
        const proteinProgress = (state.proteinGoal > 0) ? (state.consumedProtein / state.proteinGoal) * 100 : 0;
        elements.proteinBar.style.width = `${Math.min(proteinProgress, 100)}%`;
        elements.proteinProgressText.textContent = `${Math.round(proteinProgress)}%`;
        
        // Update carbs progress
        const carbsProgress = (state.carbsGoal > 0) ? (state.consumedCarbs / state.carbsGoal) * 100 : 0;
        elements.carbsBar.style.width = `${Math.min(carbsProgress, 100)}%`;
        elements.carbsProgressText.textContent = `${Math.round(carbsProgress)}%`;
        
        // Update status message
        if (caloriesProgress < 80) {
            elements.statusMessage.className = 'status-message success';
            elements.statusMessage.textContent = '🟢 أنت ضمن المعدل المطلوب';
        } else if (caloriesProgress < 100) {
            elements.statusMessage.className = 'status-message warning';
            elements.statusMessage.textContent = '🟡 اقتربت من هدفك اليومي';
        } else {
            elements.statusMessage.className = 'status-message danger';
            elements.statusMessage.textContent = '🔴 تجاوزت هدفك اليومي';
        }
    }

    // Update food history display
    function updateFoodHistory() {
        elements.foodHistory.innerHTML = '';
        if (state.foodHistory.length === 0) {
            elements.foodHistory.innerHTML = '<p>لا توجد أطعمة مسجلة بعد</p>';
            return;
        }
        
        state.foodHistory.forEach((item, index) => {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.innerHTML = `
                <div>
                    <div>${item.name}</div>
                    <div class="nutrient-info">
                        <span>${item.calories} سعرة</span>
                        <span>${item.protein} جرام بروتين</span>
                        <span>${item.carbs} جرام كارب</span>
                    </div>
                </div>
                <span class="remove-history" data-index="${index}">❌</span>
            `;
            elements.foodHistory.appendChild(historyItem);
        });
        
        // Add event listeners to remove buttons
        document.querySelectorAll('.remove-history').forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.getAttribute('data-index'));
                removeFoodFromHistory(index);
            });
        });
    }

    // Remove food from history
    function removeFoodFromHistory(index) {
        const removedItem = state.foodHistory[index];
        state.consumedCalories -= removedItem.calories;
        state.consumedProtein -= removedItem.protein;
        state.consumedCarbs -= removedItem.carbs;
        state.remainingCalories = state.dailyGoal - state.consumedCalories;
        state.foodHistory.splice(index, 1);
        saveState();
        updateFoodHistory();
        updateProgress();
    }

    // Clear all history
    function clearFoodHistory() {
        state.foodHistory = [];
        state.consumedCalories = 0;
        state.consumedProtein = 0;
        state.consumedCarbs = 0;
        state.remainingCalories = state.dailyGoal;
        saveState();
        updateFoodHistory();
        updateProgress();
    }

    // Save state to localStorage
    function saveState() {
        localStorage.setItem('calorieTrackerState', JSON.stringify(state));
    }

    // Load state from localStorage
    function loadState() {
        const savedState = localStorage.getItem('calorieTrackerState');
        if (savedState) {
            state = JSON.parse(savedState);
            updateProgress();
            updateFoodHistory();
        }
    }

    // Calculate daily needs
    function calculateDailyNeeds(gender, age, weight, height, activityLevel) {
        let bmr;
        if (gender === 'male') {
            bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
        } else {
            bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
        }
        
        const dailyCalories = Math.round(bmr * activityLevel);
        const proteinNeeds = Math.round(weight * 1.6); // 1.6 جرام بروتين لكل كيلوجرام من الوزن
        const carbsNeeds = Math.round((dailyCalories * 0.5) / 4); // 50% من السعرات من الكربوهيدرات (كل جرام كارب = 4 سعرات)
        
        return { dailyCalories, proteinNeeds, carbsNeeds };
    }

    // Event Listeners
    elements.foodCategory.addEventListener('change', () => {
        updateFoodItems(elements.foodCategory.value);
        calculateNutrients();
    });

    elements.foodItem.addEventListener('change', calculateNutrients);
    elements.quantityType.addEventListener('change', calculateNutrients);
    elements.quantity.addEventListener('input', calculateNutrients);
    elements.customCalories.addEventListener('input', calculateNutrients);
    elements.customProtein.addEventListener('input', calculateNutrients);
    elements.customCarbs.addEventListener('input', calculateNutrients);

    elements.goalType.addEventListener('change', (e) => {
        if (e.target.value === 'custom') {
            elements.customGoal.classList.remove('hidden');
            state.dailyGoal = 0;
        } else {
            elements.customGoal.classList.add('hidden');
            state.dailyGoal = parseInt(e.target.value);
        }
        state.remainingCalories = state.dailyGoal - state.consumedCalories;
        updateProgress();
        saveState();
    });

    elements.customGoal.addEventListener('input', (e) => {
        state.dailyGoal = parseInt(e.target.value) || 0;
        state.remainingCalories = state.dailyGoal - state.consumedCalories;
        updateProgress();
        saveState();
    });

    elements.addFood.addEventListener('click', () => {
        if (state.dailyGoal === 0) {
            alert('الرجاء تحديد الهدف اليومي أولاً');
            return;
        }
        const category = elements.foodCategory.value;
        let foodName, calories, protein, carbs;
        
        if (category === 'custom') {
            if (!elements.customFoodName.value || !elements.customCalories.value || !elements.customProtein.value || !elements.customCarbs.value) {
                alert('الرجاء إدخال جميع بيانات الطعام');
                return;
            }
            foodName = elements.customFoodName.value;
            const nutrients = calculateNutrients();
            calories = Math.round(nutrients.calories);
            protein = Math.round(nutrients.protein);
            carbs = Math.round(nutrients.carbs);
            
            // Add custom food to user's custom foods
            state.customFoods[foodName] = {
                calories: parseFloat(elements.customCalories.value),
                protein: parseFloat(elements.customProtein.value),
                carbs: parseFloat(elements.customCarbs.value)
            };
            
            // Add custom food to food categories
            if (!foodCategories['الأطعمة المخصصة']) {
                foodCategories['الأطعمة المخصصة'] = {};
            }
            foodCategories['الأطعمة المخصصة'][foodName] = {
                calories: parseFloat(elements.customCalories.value),
                protein: parseFloat(elements.customProtein.value),
                carbs: parseFloat(elements.customCarbs.value)
            };
            
            // Update food categories dropdown
            if (!document.querySelector('option[value="الأطعمة المخصصة"]')) {
                const option = document.createElement('option');
                option.value = 'الأطعمة المخصصة';
                option.textContent = 'الأطعمة المخصصة';
                elements.foodCategory.appendChild(option);
            }
        } else {
            foodName = elements.foodItem.value;
            if (!foodName) {
                alert('الرجاء اختيار طعام');
                return;
            }
            const nutrients = calculateNutrients();
            calories = Math.round(nutrients.calories);
            protein = Math.round(nutrients.protein);
            carbs = Math.round(nutrients.carbs);
        }
        
        // Add to consumed calories, protein and carbs
        state.consumedCalories += calories;
        state.consumedProtein += protein;
        state.consumedCarbs += carbs;
        state.remainingCalories = state.dailyGoal - state.consumedCalories;
        updateProgress();
        
        // Add to food history
        state.foodHistory.unshift({
            name: foodName,
            calories: calories,
            protein: protein,
            carbs: carbs,
            date: new Date().toLocaleString()
        });
        
        // Save data
        saveState();
        updateFoodHistory();
        
        // Reset form
        elements.foodCategory.value = '';
        elements.foodItem.innerHTML = '<option value="">اختر الطعام</option>';
        elements.customFoodEntry.classList.remove('active');
        elements.customFoodName.value = '';
        elements.customCalories.value = '';
        elements.customProtein.value = '';
        elements.customCarbs.value = '';
        elements.quantity.value = '1';
        elements.caloriesAmount.textContent = '0';
        elements.proteinAmount.textContent = '0';
        elements.carbsAmount.textContent = '0';
    });

    elements.resetDay.addEventListener('click', () => {
        state.consumedCalories = 0;
        state.consumedProtein = 0;
        state.consumedCarbs = 0;
        state.remainingCalories = state.dailyGoal;
        updateProgress();
        saveState();
    });

    elements.clearHistory.addEventListener('click', () => {
        if (confirm('هل أنت متأكد من مسح سجل الأطعمة بالكامل؟')) {
            clearFoodHistory();
        }
    });

    // Tab switching
    elements.tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.getAttribute('data-tab');
            
            // Update active tab button
            elements.tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Show corresponding tab content
            elements.tabContents.forEach(content => content.classList.add('hidden'));
            document.getElementById(`${tabId}Tab`).classList.remove('hidden');
        });
    });

    // Initialize the application
    initializeFoodCategories();
    loadState();

    // تسجيل الدخول وإنشاء حساب
    let customers = JSON.parse(localStorage.getItem('customers')) || [];

    // توليد كود مكون من 4 أرقام
    function generateCustomerCode() {
        return Math.floor(1000 + Math.random() * 9000);
    }

    // إضافة عميل جديد
    function addCustomer(name, age) {
        const existingCustomer = customers.find(c => c.name === name);
        if (existingCustomer) {
            alert('الاسم مسجل مسبقًا');
            return null;
        }
        const code = generateCustomerCode();
        const customer = { code, name, age };
        customers.push(customer);
        localStorage.setItem('customers', JSON.stringify(customers));
        return customer;
    }

    // عرض المحتوى الرئيسي
    function showMainContent() {
        document.getElementById('loginContainer').classList.add('hidden');
        document.getElementById('createAccountContainer').classList.add('hidden');
        document.getElementById('resetPasswordContainer').classList.add('hidden');
        document.getElementById('mainContent').classList.remove('hidden');
        
        // عرض معلومات المستخدم
        const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
        if (loggedInUser) {
            elements.profileInfo.innerHTML = `
                <p><strong>الاسم:</strong> ${loggedInUser.name}</p>
                <p><strong>العمر:</strong> ${loggedInUser.age}</p>
                <p><strong>الكود:</strong> ${loggedInUser.code}</p>
            `;
        }
        
        // تحميل احتياجات المستخدم إذا كانت محفوظة
        if (state.userNeeds) {
            elements.caloriesNeedsResult.innerHTML = `
                <h3>احتياجاتك اليومية:</h3>
                <p>السعرات الحرارية: ${state.userNeeds.dailyCalories} سعرة</p>
                <p>البروتين: ${state.userNeeds.proteinNeeds} جرام</p>
                <p>الكربوهيدرات: ${state.userNeeds.carbsNeeds} جرام</p>
            `;
            
            // تعيين الأهداف إذا لم تكن محددة من قبل
            if (state.dailyGoal === 0) {
                state.dailyGoal = state.userNeeds.dailyCalories;
                state.proteinGoal = state.userNeeds.proteinNeeds;
                state.carbsGoal = state.userNeeds.carbsNeeds;
                state.remainingCalories = state.dailyGoal;
                updateProgress();
                saveState();
            }
        }
    }

    // تسجيل الدخول
    document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const code = document.getElementById('loginCode').value;
        const customer = customers.find(c => c.code == code);
        if (customer) {
            alert(`مرحبًا ${customer.name}!`);
            localStorage.setItem('loggedInUser', JSON.stringify(customer));
            showMainContent();
        } else {
            alert('الكود غير صحيح');
        }
    });

    // إنشاء حساب
    document.getElementById('createAccountForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const name = document.getElementById('name').value;
        const age = document.getElementById('age').value;
        const customer = addCustomer(name, age);
        if (customer) {
            alert(`تم إنشاء حساب جديد بالكود: ${customer.code}`);
            document.getElementById('createAccountForm').reset();
            showLogin();
        }
    });

    // إعادة تعيين الكود
    document.getElementById('resetPasswordForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const name = document.getElementById('nameReset').value;
        const customer = customers.find(c => c.name === name);
        if (customer) {
            const newCode = generateCustomerCode();
            customer.code = newCode;
            localStorage.setItem('customers', JSON.stringify(customers));
            alert(`تم إرسال الكود الجديد: ${newCode}`);
            showLogin();
        } else {
            alert('الاسم غير مسجل');
        }
    });

    // إظهار إنشاء حساب
    document.getElementById('showCreateAccount').addEventListener('click', function() {
        document.getElementById('loginContainer').classList.add('hidden');
        document.getElementById('createAccountContainer').classList.remove('hidden');
    });

    // إظهار تسجيل الدخول
    document.getElementById('showLogin').addEventListener('click', function() {
        document.getElementById('createAccountContainer').classList.add('hidden');
        document.getElementById('loginContainer').classList.remove('hidden');
    });

    // إظهار إعادة تعيين الكود
    document.getElementById('forgotPassword').addEventListener('click', function() {
        document.getElementById('loginContainer').classList.add('hidden');
        document.getElementById('resetPasswordContainer').classList.remove('hidden');
    });

    // العودة لتسجيل الدخول من إعادة تعيين الكود
    document.getElementById('showLoginFromReset').addEventListener('click', function() {
        document.getElementById('resetPasswordContainer').classList.add('hidden');
        document.getElementById('loginContainer').classList.remove('hidden');
    });

    function showLogin() {
        document.getElementById('createAccountContainer').classList.add('hidden');
        document.getElementById('resetPasswordContainer').classList.add('hidden');
        document.getElementById('loginContainer').classList.remove('hidden');
    }

    // حساب الاحتياجات اليومية من السعرات الحرارية والبروتين والكربوهيدرات
    document.getElementById('caloriesNeedsForm').addEventListener('submit', function(event) {
        event.preventDefault();
        const gender = elements.gender.value;
        const age = parseFloat(elements.ageNeeds.value);
        const weight = parseFloat(elements.weightNeeds.value);
        const height = parseFloat(elements.heightNeeds.value);
        const activityLevel = parseFloat(elements.activityLevel.value);
        if (!gender || !age || !weight || !height || !activityLevel) {
            alert('الرجاء إدخال جميع البيانات');
            return;
        }
        
        const needs = calculateDailyNeeds(gender, age, weight, height, activityLevel);
        elements.caloriesNeedsResult.innerHTML = `
            <h3>احتياجاتك اليومية:</h3>
            <p>السعرات الحرارية: ${needs.dailyCalories} سعرة</p>
            <p>البروتين: ${needs.proteinNeeds} جرام</p>
            <p>الكربوهيدرات: ${needs.carbsNeeds} جرام</p>
        `;
        
        // حفظ احتياجات المستخدم
        state.userNeeds = needs;
        state.dailyGoal = needs.dailyCalories;
        state.proteinGoal = needs.proteinNeeds;
        state.carbsGoal = needs.carbsNeeds;
        state.remainingCalories = state.dailyGoal;
        
        // حفظ البيانات
        saveState();
        updateProgress();
    });

    // التحقق من تسجيل الدخول التلقائي
    const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
    if (loggedInUser) {
        showMainContent();
    }

    // تسجيل الخروج
    document.getElementById('logoutButton').addEventListener('click', function() {
        localStorage.removeItem('loggedInUser');
        alert('تم تسجيل الخروج بنجاح');
        showLogin();
    });
</script>